From 1a83abf6176c1b87d9f027f1934796c68379fef5 Mon Sep 17 00:00:00 2001
From: YukiLeafX <yukileafx@gmail.com>
Date: Fri, 15 May 2020 18:57:28 +0900
Subject: [PATCH] Don't save files


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 97859ecf..9be036ad 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -302,12 +302,7 @@ public final class CraftServer implements Server {
     }
 
     private void saveCommandsConfig() {
-        try {
-            // commandsConfiguration.save(getCommandsConfigFile()); // Yukkit
-            Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring SAVE for " + getCommandsConfigFile()); // Yukkit
-        } catch (IOException ex) {
-            Logger.getLogger(CraftServer.class.getName()).log(Level.SEVERE, "Could not save " + getCommandsConfigFile(), ex);
-        }
+        Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring SAVE for " + getCommandsConfigFile()); // Yukkit
     }
 
     public void loadPlugins() {
@@ -831,33 +826,12 @@ public final class CraftServer implements Server {
         File file = new File(configuration.getString("settings.permissions-file"));
         FileInputStream stream;
 
-        try {
-            stream = new FileInputStream(file);
-        } catch (FileNotFoundException ex) {
-            try {
-                // file.createNewFile(); // Yukkit
-                Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring CREATE for " + file); // Yukkit
-            } finally {
-                return;
-            }
-        }
+        Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring CREATE for " + file); // Yukkit
 
         Map<String, Map<String, Object>> perms;
 
-        try {
-            perms = null; // Yukkit
-            Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Applying empty permissions as " + file); // Yukkit
-        } catch (MarkedYAMLException ex) {
-            getLogger().log(Level.WARNING, "Server permissions file " + file + " is not valid YAML: " + ex.toString());
-            return;
-        } catch (Throwable ex) {
-            getLogger().log(Level.WARNING, "Server permissions file " + file + " is not valid YAML.", ex);
-            return;
-        } finally {
-            try {
-                stream.close();
-            } catch (IOException ex) {}
-        }
+        perms = null; // Yukkit
+        Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Applying empty permissions as " + file); // Yukkit
 
         if (perms == null) {
             getLogger().log(Level.INFO, "Server permissions file " + file + " is empty, ignoring it");
diff --git a/src/main/java/org/bukkit/craftbukkit/help/HelpYamlReader.java b/src/main/java/org/bukkit/craftbukkit/help/HelpYamlReader.java
index 9e1a0206..1dd1430a 100644
--- a/src/main/java/org/bukkit/craftbukkit/help/HelpYamlReader.java
+++ b/src/main/java/org/bukkit/craftbukkit/help/HelpYamlReader.java
@@ -35,14 +35,7 @@ public class HelpYamlReader {
             helpYaml.options().copyDefaults(true);
             helpYaml.setDefaults(defaultConfig);
 
-            try {
-                if (!helpYamlFile.exists()) {
-                    // helpYaml.save(helpYamlFile); // Yukkit
-                    java.util.logging.Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring SAVE for " + helpYamlFile); // Yukkit
-                }
-            } catch (IOException ex) {
-                server.getLogger().log(Level.SEVERE, "Could not save " + helpYamlFile, ex);
-            }
+            java.util.logging.Logger.getLogger("Yukkit").log(Level.INFO, ChatColor.AQUA + "Yukkit" + ChatColor.RESET + " >> Ignoring SAVE for " + helpYamlFile); // Yukkit
         } catch (Exception ex) {
             server.getLogger().severe("Failed to load help.yml. Verify the yaml indentation is correct. Reverting to default help.yml.");
             helpYaml = defaultConfig;
-- 
2.26.2.windows.1

